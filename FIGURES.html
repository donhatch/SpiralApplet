<!DOCTYPE html>
<html>
<head>
    <!--
        TODO: text highlights when dragging, make it not do that
        TODO: make it not change into a text cursor when dragging? (when on text too)
        TODO: make it draggable even when in other document!

        TODO: overline of x_d isn't quite right- try to use borders instead? maybe not supported
        TODO: more descriptive than "dragging thing with"
        TODO: constraints?
        TODO: show values somewhere on screen instead of console log
        TODO: make drag handle bigger on hover

        TODO: dragging 0 should change global translate
        TODO: dragging p should change global scale
        TODO: doesn't detect mouse clicks in firefox?
    -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Figures for The Spiral Moment Lemma: There's No Single-Exit Lagoon</title>
    <style type="text/css">
        body {font-size:large;}
        /* "smaller" seems to mean 80% */
        #theSource {font-size: 58.119653701782230115213678800500929355622%;} /* minimum that stays black instead of turning gray */

        svg {
            border: 1px dashed black;
        }

        text {
            /* make it so the text doesn't get highlighted
               if the mouse is over it during dragging,
               since that got pretty distracting.
               the user-select one is commented out because it provokes a warning in firefox.
               */
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            /* user-select: none; */

            /* fill: green; */
        }


        /* TODO: figure out how to hard code this */
        .assertFail:before {  
            color: red;  
            font-weight: bold;  
        }  

    </style>

    <!-- 1.9.1 provokes warnings in firefox:
         Unknown property 'box-sizing'. Declaration dropped.
         :-(
    -->
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>


    <script>
	// make $ not be an alias for jQuery
        // since I think that's ridiculous
        jQuery.noConflict();
    </script>

    <script src="initFigure5Interaction.js"></script> <!-- do NOT self-close, that causes weirdness -->

    <script>
        jQuery(document).ready(function() {
            console.log("in jquery document-ready function!");

            var theDiv = jQuery('#theDiv');
            var theSource = jQuery('#theSource');
            initFigure5Interaction(function() {
                // this gets called when svg source changes
                theSource.text("    "+jQuery.trim(theDiv[0].innerHTML));
            });

            console.log("out jquery document-ready function!");
        }); // jquery document ready function
    </script>
</head>
<body>

<p>
<!-- ======================================================================== -->
<div id="theDiv">
    <svg id="figure5" xmlns="http://www.w3.org/2000/svg" version="1.1" height="330" width="450">
        <!-- 1 unit = 20 pixels -->
        <g class="theGraphic" transform="translate(150,300) scale(200,-200)">
           
            <!-- note, the super-light gray here might not be appropriate for printing or most displays; my display maybe isn't like most -->
            <path class="yAxis" vector-effect="non-scaling-stroke" style="stroke:#f0f0f0; stroke-width:2; fill: none; stroke-opacity:1" d="M 0 1 L 0 0"></path>

            <path class="otherStuffPath" vector-effect="non-scaling-stroke" style="stroke:#808080; stroke-width:2; stroke-dasharray:5,5; fill: none; stroke-opacity:1" d="M 0 0 L 0.7423346382855579 0 L 0.7423346382855579 0.6700293163746269 M 0 0 L 0.6 0 L 0.6 0.35"></path>

            <path class="dudleyNeighborsPath" stroke-miterlimit="100000" vector-effect="non-scaling-stroke" style="stroke:rgb(192,192,255); stroke-width: 2; fill: none; stroke-opacity:1" d=" M 0.7423346382855579 0.6700293163746269 L 0.8485866059822487 1.162944380549283 L 0 0 M 0.6 0.35 L 0.4577167894701633 0.15264858544096038 L 0 0"></path>
            <path class="dudleyMainPath" vector-effect="non-scaling-stroke" style="stroke: blue; stroke-width: 4; fill: none; stroke-miterlimit:1.414" d="M 0 0 L 0.6 0.35 L 0.7423346382855579 0.6700293163746269 L 0 0"></path>
            <path class="priscillaNeighborsPath" vector-effect="non-scaling-stroke" style="stroke:rgb(255,192,192); stroke-width: 2; fill: none; stroke-opacity:1" d=" M -0.8305934015249383 1.8988238275266283 L -0.29471599259032316 1.4091420594869517 L 0.1981990715843327 1.302890091790261 M 0.33955188098387046 0.5376278331726174 L 0.14220046642483092 0.6799110437024541 L 0.19336733508376516 0.44205805469712106"></path>
            <path class="priscillaMainPath" vector-effect="non-scaling-stroke" style="stroke: red; stroke-width: 2; fill: none; stroke-opacity:.2" d="M 0.14220046642483092 0.6799110437024541 L 0 1 L -0.29471599259032316 1.4091420594869517 M 0 1 L 0.32002931637462695 0.8576653617144421"></path>

                
            <g transform="translate(0,1)">
                <g class="undoScaleForSvgText" transform="scale(0.005,-0.005)">
                    <circle class="priscillaPoint" cx="0" cy="0" r="5" style="stroke: none; fill: red;"></circle>
                </g>
            </g>
            <g transform="translate(0,0)">
                <g class="undoScaleForSvgText" transform="scale(0.005,-0.005)">
                    <circle x="0" y="0" r="3" style="stroke:blue;fill:white"></circle>
                    <g transform="translate(-10,15)">
                        <text>0</text>
                    </g>
                </g>
            </g>
            <g transform="translate(0,1)">
                <g class="undoScaleForSvgText" transform="scale(0.005,-0.005)">
                    <g transform="translate(10,-10)">
                        <text>p</text>
                    </g>
                </g>
            </g>

            <g class="d1transform" transform="translate(0.6,0.35)">
                <g class="undoScaleForSvgText" transform="scale(0.005,-0.005)">
                    <circle x="0" y="0" r="3" style="stroke:blue;fill:white"></circle>
                    <g transform="translate(5,10)">
                        <text class="d1text" style="text-decoration:underline">d</text>
                    </g>
                </g>
            </g>
            <g class="xd1transform" transform="translate(0.6,0)">
                <g class="undoScaleForSvgText" transform="scale(0.005,-0.005)">
                    <g transform="translate(-15,17)">
                        <text class="xd1text">
                            <tspan style="text-decoration:underline">x</tspan><tspan dy="5" font-size="70%">d</tspan>
                        </text>
                    </g>
                </g>
            </g>

            <g class="d2transform" transform="translate(0.7423346382855579,0.6700293163746269)">
                <g class="undoScaleForSvgText" transform="scale(0.005,-0.005)">
                    <circle x="0" y="0" r="3" style="stroke:blue;fill:white"></circle>
                    <g transform="translate(10,5)">
                        <text class="d2text" style="text-decoration:overline">d</text>
                    </g>
                </g>
            </g>
            <g class="xd2transform" transform="translate(0.7423346382855579,0)">
                <g class="undoScaleForSvgText" transform="scale(0.005,-0.005)">
                    <g transform="translate(0,17)">
                        <text class="xd2text">
                            <tspan style="text-decoration:overline">x</tspan><tspan dy="5" font-size="70%">d</tspan>
                        </text>
                    </g>
                </g>
            </g>
        </g>
    </svg>
</div>
<!-- ======================================================================== -->
<ul id="assertOutputList">
</ul>  

<pre id="theSource">
(this should get replaced by the svg source code)
</pre>

<!-- decoy, make sure this works -->
<p class="theGraphic">

</body>
</html>



